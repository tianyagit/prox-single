{template 'common/header'}
<div class="panel panel-cut" id="js-account-display" ng-controller="AccountDisplay" when-scrolled ="loadMore()" ng-cloak>
	<div class="panel-heading">
		è¯·é€‰æ‹©æ‚¨è¦æ“ä½œçš„å…¬ä¼—å·
	</div>
	<div class="panel-body">
		{if !$_W['isfounder'] && !empty($account_info['uniacid_limit'])}
			<div class="alert alert-warning">
				æ¸©é¦¨æç¤ºï¼
				<i class="fa fa-info-circle"></i>
				Hiï¼span class="text-strong">{$_W['username']}</span>ï¼Œæ‚¨æ‰€åœ¨çš„ä¼šå‘˜ç»„ï¼š <span class="text-strong">{$account_info['group_name']}</span>ï¼
				è´¦å·æœ‰æ•ˆæœŸé™ï¼span class="text-strong">{php echo date('Y-m-d', $_W['user']['starttime'])} ~~ {if empty($_W['user']['endtime'])}æ— é™åˆ¶{else}{php echo date('Y-m-d', $_W['user']['endtime'])}{/if}</span>ï¼
				å¯åˆ›å»<span class="text-strong">{$account_info['maxaccount']} </span>ä¸ªå…¬ä¼—å·ï¼Œå·²åˆ›å»º<span class="text-strong"> {$account_info['uniacid_num']} </span>ä¸ªï¼Œè¿˜å¯åˆ›å»º <span class="text-strong">{$account_info['uniacid_limit']} </span>ä¸ªå…¬ä¼—å·ã€
			</div>
		{/if}
		<div class="cut-header">
			<form action="./index.php" method="get">
				<input type="hidden" name="c" value="account">
				<input type="hidden" name="a" value="display">
				<input type="text" name="letter" ng-model="activeLetter" ng-style="{'display': 'none'}">
				<div class="cut-search" style="margin-left: 60px;">
					<div class="input-group pull-left">
						<input class="form-control" name="keyword" value="{$_GPC['keyword']}" type="text" placeholder="è¯·è¾“å…¥å¾®ä¿¡å…¬ä¼—å·åç§°" >
						<span class="input-group-btn"><button class="btn btn-default button"><i class="fa fa-search"></i></button></span>
					</div>
				</div>
			</form>
			<div class="cut-manage pull-right">
				{if !empty($account_info['uniacid_limit'])}
					<a href="./index.php?c=account&a=post-step" class="color-default"><i class="fa fa-plus"></i>æ–°å¢å…¬ä¼—å/a>
				{/if}
				{if $state == ACCOUNT_MANAGE_NAME_FOUNDER || $state == ACCOUNT_MANAGE_NAME_MANAGER}
					<a href="./index.php?c=account&a=manage" class="color-default"><i class="wi wi-wechatstatistics"></i>å…¬ä¼—å·ç®¡ç/a>
				{/if}
			</div>
		</div>
		<div class="clearfix"></div>
		<ul class="letters-list cut-wechat-letters">
			<li ng-repeat="letter in alphabet" ng-style="{'background-color': letter == activeLetter ? '#ddd' : 'none'}" ng-class="{'active': letter == activeLetter}" ng-click="searchModule(letter)">
				<a href="javascript:;" ng-bind="letter"></a>
			</li>
		</ul>
		<ul class="cut-wechat-list" ng-if="accountList">
			<span ng-repeat="account in accountList">
				<li ng-repeat="detail in account.details">
					<div class="cut-wechat-item">
						<i class="fa fa-2x fa-check-circle text-success hide" ng-style="{'position':'absolute', 'top':'15px', 'right':'15px'}" ng-if="detail.isconnect == 1"></i>
						<i class="fa fa-2x fa-times-circle text-warning hide" ng-style="{'position':'absolute', 'top':'15px', 'right':'15px'}" ng-if="detail.isconnect == 0"></i>
						<img ng-src="{{detail.thumb}}">
						<p class="wechat-name" ng-bind="detail.name"></p>
						<span class="wechat-versions" ng-if="detail.level == 1">ç±»å‹ï¼šæ™®é€šè®¢é˜…å·</span>
						<span class="wechat-versions" ng-if="detail.level == 2">ç±»å‹ï¼šæ™®é€šæœåŠ¡å·</span>
						<span class="wechat-versions" ng-if="detail.level == 3">ç±»å‹ï¼šè®¤è¯è®¢é˜…å·</span>
						<span class="wechat-versions" ng-if="detail.level == 4">ç±»å‹ï¼šè®¤è¯æœåŠ¡å·...</span>
						<div class="cover-dark">
							<a ng-href="{{account.url}}" class="manage-fa"><i class="fa fa-angle-right"></i></a>
							<a ng-href="{{account.url}}" class="manage">è¿›å…¥å…¬ä¼—å/a>
							<a href="javascript:;" class="stick" ng-click="stick(detail.uniacid)" title="ç½®é¡¶"><i class="wi wi-stick-sign"></i></a>
						</div>
					</div>
				</li>
			</span>
		</ul>
		<div class="text-right">
			{$pager}
		</div>
		<ul ng-if="!accountList" style="text-align:center;width:100%"><span ng-if="!accountList">æš‚æ— æ•°æ®</span></ul>
	</div>
	<div class="panel-footer"></div>
</div>
<script>
	angular.module('accountApp').value('config', {
		accountList: {php echo !empty($list) ? json_encode($list) : 'null'},
		links: {
			rank: "{php echo url('account/display/rank')}",
			display: "{php echo url('account/display/display')}",
		},
		scrollUrl : "{php echo url('account/display')}",
		totalPage : "{$total_page}",
		keyword : "{$keyword}",
		letter : "{$letter}"
	});
	angular.bootstrap(document, ['accountApp']);
	angular.bootstrap($("#js-account-display"), ['accountApp']);
</script>
{template 'common/footer'}